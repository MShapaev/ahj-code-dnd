(()=>{"use strict";function e(e){const t=document.createElement("div");t.classList.add("list__item"),t.draggable=!0;const n=document.createElement("span");n.textContent=e,t.appendChild(n);const c=document.createElement("img");return c.classList.add("delete__item-btn"),c.src="svg/X.svg",c.alt="Delete",t.appendChild(c),t}function t(){const e=document.querySelectorAll(".column__item"),t=[];e.forEach((e=>{const n=[];e.querySelector(".list").querySelectorAll(".list__item").forEach((e=>{n.push(e.querySelector("span").textContent)})),t.push(n)})),localStorage.setItem("taskState",JSON.stringify(t))}function n(){const e=document.querySelectorAll(".list");document.querySelectorAll(".list__item").forEach((e=>{e.addEventListener("dragstart",(()=>{e.classList.add("dragging")})),e.addEventListener("dragend",(()=>{e.classList.remove("dragging")})),e.addEventListener("click",(e=>{e.target.classList.contains("delete__item-btn")&&(e.target.parentNode.remove(),t())}))})),e.forEach((e=>{e.addEventListener("dragover",(n=>{n.preventDefault();const c=document.querySelector(".dragging"),r=function(e,t){return[...e.querySelectorAll(".list__item:not(.dragging)")].reduce(((e,n)=>{const c=n.getBoundingClientRect(),r=t-c.top-c.height/2;return r<0&&r>e.offset?{offset:r,element:n}:e}),{offset:Number.NEGATIVE_INFINITY}).element}(e,n.clientY);null===r?e.appendChild(c):e.insertBefore(c,r),t()}))}))}document.addEventListener("DOMContentLoaded",(()=>{!function(){const t=JSON.parse(localStorage.getItem("taskState"));t&&(document.querySelectorAll(".column__item").forEach(((n,c)=>{const r=n.querySelector(".list");r.innerHTML="",t[c].forEach((t=>{const n=e(t);r.appendChild(n)}))})),n())}()})),document.querySelectorAll(".column__item").forEach((function(c){const r=c.querySelectorAll(".list"),l=c.querySelector(".add__btn"),o=c.querySelector(".add__item-btn"),a=c.querySelector(".cancel__item-btn"),s=c.querySelector(".form"),i=c.querySelector(".textarea");let d="";function u(){i.value="",d="",s.style.display="none",l.style.display="block"}l.addEventListener("click",(()=>{s.style.display="block",l.style.display="none",i.focus()})),a.addEventListener("click",(()=>{u()})),o.addEventListener("click",(()=>{const c=e(d);r[0].appendChild(c),t(),u(),n()})),i.addEventListener("input",(e=>{d=e.target.value})),document.addEventListener("click",(e=>{const t=s.contains(e.target),n=l.contains(e.target),c=i.contains(e.target),r=o.contains(e.target),d=a.contains(e.target);t||n||c||r||d||u()})),n()}))})();